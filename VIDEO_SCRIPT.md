# Сценарий видео: Интеграция 1С с GigaChat при помощи Claude Code

## Метаданные
- **Название:** Подключаем GigaChat к 1С с помощью Claude Code
- **Целевая аудитория:** 1С-разработчики
- **Длительность:** 10-15 минут
- **Формат:** Screencast с озвучкой (запись без звука → монтаж → озвучка)
- **Фишка:** Весь код пишет Claude Code, автор направляет и объясняет

---

## ПОДГОТОВКА К ЗАПИСИ

### Прогон без записи
Перед записью видео нужно:
1. Пройти весь сценарий вместе с Claude Code
2. Убедиться что код работает
3. Записать успешные промпты для Claude Code
4. Очистить папку проекта для "чистой" записи

### Чеклист перед записью
- [ ] OBS настроен (1920x1080)
- [ ] Терминал с крупным шрифтом (14-16pt)
- [ ] VSCode с Claude Code расширением открыт
- [ ] Чистая папка проекта (только .env.example, requirements.txt)
- [ ] Credentials GigaChat готовы
- [ ] 1С готова (любая конфигурация)

### Что показать в кадре
- VSCode с открытым Claude Code
- Терминал для тестирования
- Браузер для Swagger docs
- 1С для демонстрации интеграции

---

## ЧАСТЬ 1: ВВЕДЕНИЕ (1-2 мин)

### Кадр 1.1: Титульный слайд

**Показать:** Рабочий стол или заставку

**Озвучка:**
> Привет! Сегодня покажу, как подключить GigaChat к 1С.
> И сделаем это с помощью Claude Code — ИИ-ассистента для разработки.
> Я буду ставить задачи, Claude Code будет писать код.

### Кадр 1.2: Схема архитектуры

**Показать:** Схему

```
┌─────────────┐     HTTP/JSON     ┌──────────────┐     ┌─────────────┐
│     1С      │ ───────────────►  │   FastAPI    │ ──► │  GigaChat   │
│             │ ◄───────────────  │  (Python)    │     │    API      │
└─────────────┘                   └──────────────┘     └─────────────┘
                                        ↑
                                  cron обновляет
                                  токен каждые 20 мин
```

**Озвучка:**
> Архитектура простая:
> - 1С отправляет текст в наш Python сервер
> - Python сервер пересылает в GigaChat и возвращает ответ
> - Токен обновляется автоматически через cron
>
> Почему не напрямую из 1С? GigaChat требует OAuth и работу с сертификатами.
> Проще вынести это в Python.

---

## ЧАСТЬ 2: ЗНАКОМСТВО С CLAUDE CODE (1 мин)

### Кадр 2.1: Открываем Claude Code

**Показать:** VSCode с Claude Code

**Озвучка:**
> Открываю VSCode. Claude Code — это расширение или CLI от Anthropic.
> Работает как напарник: понимает контекст проекта, пишет код, запускает команды.
>
> Начнём с простого — попросим настроить проект.

---

## ЧАСТЬ 3: СОЗДАНИЕ ПРОЕКТА С CLAUDE CODE (3 мин)

### Кадр 3.1: Первый промпт

**Промпт для Claude Code:**
```
Создай структуру проекта для интеграции 1С с GigaChat:
1. Скрипт обновления токена scripts/update_token.sh (для cron)
2. Модуль gigachat_client.py - чтение токена из файла, запросы к API
3. FastAPI сервер api_server.py с endpoint /analyze/text

Токен будет в файле .env.tokens, credentials в .env
```

**Озвучка:**
> Даю задачу Claude Code. Описываю что нужно: скрипт для токена,
> клиент GigaChat, и API сервер.
>
> Смотрите — он анализирует задачу и начинает создавать файлы...

### Кадр 3.2: Claude Code создаёт файлы

**Показать:** Как Claude Code создаёт файлы один за другим

**Озвучка:**
> Claude Code создаёт структуру. Видно что он:
> - Понимает архитектуру
> - Знает особенности GigaChat API (verify=False для сертификата)
> - Добавляет обработку ошибок
>
> Я могу вмешаться и попросить что-то изменить в любой момент.

### Кадр 3.3: Уточняющий промпт (если нужно)

**Промпт для Claude Code:**
```
Добавь в api_server.py параметр return_format - если html,
оберни ответ в HTML для красивого отображения в 1С
```

**Озвучка:**
> Если что-то не так — просто прошу доработать.
> Claude Code понимает контекст и вносит изменения точечно.

---

## ЧАСТЬ 4: НАСТРОЙКА И ТЕСТИРОВАНИЕ (2 мин)

### Кадр 4.1: Настройка окружения

**Промпт для Claude Code:**
```
Помоги настроить окружение:
1. Создай venv и установи зависимости
2. Скопируй .env.example в .env
3. Запусти скрипт получения токена
```

**Показать:** Claude Code выполняет команды в терминале

**Озвучка:**
> Прошу Claude Code настроить окружение. Он сам:
> - Создаёт виртуальное окружение
> - Устанавливает пакеты
> - Запускает скрипт токена
>
> Мне остаётся только вписать credentials в .env файл.

### Кадр 4.2: Тестирование API

**Промпт для Claude Code:**
```
Запусти сервер и протестируй endpoint /analyze/text
с текстом договора
```

**Показать:** Запуск сервера, curl запрос, ответ от GigaChat

**Озвучка:**
> Тестируем. Отправляю текст договора...
> GigaChat извлёк ключевые данные: стороны, сумму, сроки.
> API работает!

---

## ЧАСТЬ 5: ИНТЕГРАЦИЯ С 1С (3 мин)

### Кадр 5.1: Код для 1С

**Промпт для Claude Code:**
```
Напиши код модуля формы 1С для отправки запросов к нашему API.
Реквизиты: ТекстЗапроса, СистемныйПромпт, РезультатHTML, АдресСервера
```

**Показать:** Claude Code генерирует код на языке 1С

**Озвучка:**
> Прошу Claude Code написать код для 1С.
> Он знает синтаксис 1С и генерирует рабочий код:
> - Формирование JSON
> - HTTP запрос
> - Парсинг ответа

### Кадр 5.2: Создание формы в 1С

**Показать:** Конфигуратор 1С
1. Создание Общей формы
2. Добавление реквизитов
3. Вставка кода из Claude Code

**Озвучка:**
> Создаю форму в конфигураторе. Добавляю реквизиты...
> Вставляю код который сгенерировал Claude Code...

### Кадр 5.3: Демонстрация

**Показать:** Работу формы в 1С

**Озвучка:**
> Открываю форму, вставляю текст договора...
> Отправляю... Готово!
> GigaChat проанализировал и выдал структурированный ответ.

---

## ЧАСТЬ 6: НАСТРОЙКА CRON (1 мин)

### Кадр 6.1: Автоматизация токена

**Промпт для Claude Code:**
```
Покажи как настроить cron для автоматического обновления токена
```

**Показать:** Настройка crontab

**Озвучка:**
> Последний штрих — автоматическое обновление токена.
> Токен GigaChat живёт 30 минут, обновляем каждые 20.
> Теперь всё работает автономно.

---

## ЧАСТЬ 7: ЗАКЛЮЧЕНИЕ (1 мин)

### Кадр 7.1: Итоги

**Озвучка:**
> Что мы сделали с помощью Claude Code:
> 1. Создали Python API сервер за пару минут
> 2. Настроили автообновление токена
> 3. Подключили к 1С
>
> Claude Code написал весь код, я только направлял.
> Это реально ускоряет разработку.

### Кадр 7.2: Ссылки

**Озвучка:**
> Код проекта на GitHub — ссылка в описании.
> Claude Code доступен на claude.ai/code
> Вопросы — в комментариях!

---

## ПРОМПТЫ ДЛЯ CLAUDE CODE (шпаргалка)

### 1. Создание проекта
```
Создай структуру проекта для интеграции 1С с GigaChat:
1. Скрипт обновления токена scripts/update_token.sh (для cron)
2. Модуль gigachat_client.py - чтение токена из файла, запросы к API
3. FastAPI сервер api_server.py с endpoint /analyze/text

Токен будет в файле .env.tokens, credentials в .env
```

### 2. Настройка окружения
```
Создай venv, установи зависимости из requirements.txt
```

### 3. Тестирование
```
Запусти api_server.py и протестируй /analyze/text с примером текста договора
```

### 4. Код 1С
```
Напиши код модуля формы 1С для отправки запросов к API.
Реквизиты: ТекстЗапроса, СистемныйПромпт, РезультатHTML, АдресСервера
```

### 5. Настройка cron
```
Покажи команду для crontab - обновлять токен каждые 20 минут
```

---

## ФАЙЛЫ ПОСЛЕ ПРОГОНА

```
~/video-demo/ai-1c/
├── api_server.py           # FastAPI сервер
├── gigachat_client.py      # Клиент GigaChat
├── scripts/
│   └── update_token.sh     # Обновление токена
├── 1c_forms/
│   └── ГигаЧатАссистент.txt  # Код формы 1С
├── logs/                   # Логи (создаётся)
├── .env                    # Конфигурация
├── .env.tokens             # Токен (создаётся)
├── .env.example
├── .gitignore
├── requirements.txt
├── README.md
├── CLAUDE.md
└── VIDEO_SCRIPT.md
```
